<mxGraphModel dx="3200" dy="1800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1400" math="0" shadow="0">
  <root>
    <mxCell id="0" />
    <mxCell id="1" parent="0" />

    <!-- Title -->
    <mxCell id="title" parent="1" style="text;whiteSpace=wrap;html=1;fontSize=18;fontStyle=1;" value="Container Diagram - Wrencos Platform" vertex="1">
      <mxGeometry height="40" width="600" x="50" y="20" as="geometry" />
    </mxCell>

    <!-- Group: Frontend -->
    <mxCell id="group_frontend" parent="1" style="swimlane;horizontal=1;startSize=28;fillColor=#ffffff;strokeColor=#666666;dashed=1;rounded=1;fontStyle=1;fontColor=#333333;container=1;recursiveResize=0;" value="Frontend" vertex="1">
      <mxGeometry x="40" y="60" width="1220" height="420" as="geometry" />
    </mxCell>

    <!-- Group: Backend -->
    <mxCell id="group_backend" parent="1" style="swimlane;horizontal=1;startSize=28;fillColor=#ffffff;strokeColor=#666666;dashed=1;rounded=1;fontStyle=1;fontColor=#333333;container=1;recursiveResize=0;" value="Backend" vertex="1">
      <mxGeometry x="40" y="520" width="820" height="260" as="geometry" />
    </mxCell>

    <!-- Group: Internal -->
    <mxCell id="group_internal" parent="1" style="swimlane;horizontal=1;startSize=28;fillColor=#ffffff;strokeColor=#666666;dashed=1;rounded=1;fontStyle=1;fontColor=#333333;container=1;recursiveResize=0;" value="Internal" vertex="1">
      <mxGeometry x="880" y="520" width="380" height="540" as="geometry" />
    </mxCell>

    <!-- Group: External -->
    <mxCell id="group_external" parent="1" style="swimlane;horizontal=1;startSize=28;fillColor=#ffffff;strokeColor=#666666;dashed=1;rounded=1;fontStyle=1;fontColor=#333333;container=1;recursiveResize=0;" value="External" vertex="1">
      <mxGeometry x="40" y="1080" width="1220" height="260" as="geometry" />
    </mxCell>

    <!-- System User (Person) - outside groups -->
    <object label="&lt;b&gt;System User&lt;/b&gt;&lt;br&gt;[Person]&lt;br&gt;&lt;br&gt;Guests, Customers,&lt;br&gt;Admins" id="user">
      <mxCell parent="1" style="html=1;dashed=0;whitespace=wrap;fillColor=#08427b;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.person;align=center;metaEdit=1;resizable=0;" vertex="1">
        <mxGeometry height="160" width="160" x="50" y="150" as="geometry" />
      </mxCell>
    </object>

    <!-- Frontend items (children of group_frontend) -->
    <mxCell id="web_browser" parent="group_frontend" style="html=1;dashed=0;whitespace=wrap;fillColor=#438dd5;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.webBrowserContainer;align=center;fontSize=12;" value="&lt;b&gt;Web Browser - Admin&lt;/b&gt;&lt;br&gt;[Container: Vue.js SPA]&lt;br&gt;&lt;br&gt;Admin interface for managing products,&lt;br&gt;orders, livestreams, AI chat, and operations." vertex="1">
      <mxGeometry height="180" width="260" x="80" y="60" as="geometry" />
    </mxCell>

    <mxCell id="web_browser_customer" parent="group_frontend" style="html=1;dashed=0;whitespace=wrap;fillColor=#438dd5;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.webBrowserContainer;align=center;fontSize=12;" value="&lt;b&gt;Web Browser - Customer&lt;/b&gt;&lt;br&gt;[Container: Vue.js SPA]&lt;br&gt;&lt;br&gt;Customer interface for browsing,&lt;br&gt;livestream shopping, chat, checkout." vertex="1">
      <mxGeometry height="180" width="260" x="80" y="260" as="geometry" />
    </mxCell>

    <mxCell id="mobile_admin" parent="group_frontend" style="html=1;dashed=0;whitespace=wrap;fillColor=#438dd5;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.mobileDeviceContainer;align=center;fontSize=12;" value="&lt;b&gt;Mobile App - Admin&lt;/b&gt;&lt;br&gt;[Container: React Native]&lt;br&gt;&lt;br&gt;Manage livestreams, broadcast video,&lt;br&gt;pin products, chat with customers." vertex="1">
      <mxGeometry height="180" width="260" x="440" y="60" as="geometry" />
    </mxCell>

    <mxCell id="mobile_customer" parent="group_frontend" style="html=1;dashed=0;whitespace=wrap;fillColor=#438dd5;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.mobileDeviceContainer;align=center;fontSize=12;" value="&lt;b&gt;Mobile App - Customer&lt;/b&gt;&lt;br&gt;[Container: React Native]&lt;br&gt;&lt;br&gt;Watch livestreams, purchase products,&lt;br&gt;chat with admins, get AI advice." vertex="1">
      <mxGeometry height="180" width="260" x="800" y="60" as="geometry" />
    </mxCell>

    <!-- Backend items (children of group_backend) -->
    <mxCell id="api_gateway" parent="group_backend" style="html=1;dashed=0;whitespace=wrap;fillColor=#1168bd;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.container;align=center;fontSize=12;" value="&lt;b&gt;API Gateway / Backend Server&lt;/b&gt;&lt;br&gt;[Container: Node.js + Express]&lt;br&gt;&lt;br&gt;REST API endpoints for auth, products,&lt;br&gt;orders, livestreams, chat, payments." vertex="1">
      <mxGeometry height="200" width="280" x="100" y="40" as="geometry" />
    </mxCell>

    <mxCell id="websocket_server" parent="group_backend" style="html=1;dashed=0;whitespace=wrap;fillColor=#1168bd;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.container;align=center;fontSize=12;" value="&lt;b&gt;WebSocket Server&lt;/b&gt;&lt;br&gt;[Container: Node.js + ws]&lt;br&gt;&lt;br&gt;Real-time chat, viewer count, likes,&lt;br&gt;pinned products, WebRTC signaling." vertex="1">
      <mxGeometry height="200" width="280" x="460" y="40" as="geometry" />
    </mxCell>

    <!-- Internal items (children of group_internal) -->
    <mxCell id="database" parent="group_internal" style="html=1;dashed=0;whitespace=wrap;fillColor=#1168bd;strokeColor=#0b3d91;fontColor=#000000;shape=cylinder;gradientColor=none;align=center;fontSize=12;" value="&lt;b&gt;Database (MongoDB)&lt;/b&gt;&lt;br&gt;[Container]&lt;br&gt;&lt;br&gt;Users, products, orders, livestreams,&lt;br&gt;chat history, transactions, analytics." vertex="1">
      <mxGeometry height="180" width="260" x="20" y="40" as="geometry" />
    </mxCell>

    <mxCell id="vector_db" parent="group_internal" style="html=1;dashed=0;whitespace=wrap;fillColor=#1168bd;strokeColor=#0b3d91;fontColor=#000000;shape=cylinder;gradientColor=none;align=center;fontSize=12;" value="&lt;b&gt;Vector Database (Qdrant)&lt;/b&gt;&lt;br&gt;[Container]&lt;br&gt;&lt;br&gt;Embeddings for RAG responses and&lt;br&gt;product recommendations." vertex="1">
      <mxGeometry height="180" width="260" x="20" y="240" as="geometry" />
    </mxCell>

    <!-- External items (children of group_external) -->
    <mxCell id="gemini" parent="group_external" style="html=1;dashed=0;whitespace=wrap;fillColor=#999999;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.container;align=center;fontSize=12;" value="&lt;b&gt;Google Gemini AI API&lt;/b&gt;&lt;br&gt;[External Service]&lt;br&gt;&lt;br&gt;AI dermatology, recommendations,&lt;br&gt;chat responses." vertex="1">
      <mxGeometry height="180" width="260" x="40" y="40" as="geometry" />
    </mxCell>

    <mxCell id="vnpay" parent="group_external" style="html=1;dashed=0;whitespace=wrap;fillColor=#999999;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.container;align=center;fontSize=12;" value="&lt;b&gt;VNPay Payment Gateway&lt;/b&gt;&lt;br&gt;[External Service]&lt;br&gt;&lt;br&gt;Payment processing and transactions." vertex="1">
      <mxGeometry height="180" width="260" x="340" y="40" as="geometry" />
    </mxCell>

    <mxCell id="smtp" parent="group_external" style="html=1;dashed=0;whitespace=wrap;fillColor=#999999;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.container;align=center;fontSize=12;" value="&lt;b&gt;SMTP Email Server&lt;/b&gt;&lt;br&gt;[External Service]&lt;br&gt;&lt;br&gt;Transactional emails, marketing,&lt;br&gt;newsletters." vertex="1">
      <mxGeometry height="180" width="260" x="640" y="40" as="geometry" />
    </mxCell>

    <mxCell id="agora" parent="group_external" style="html=1;dashed=0;whitespace=wrap;fillColor=#999999;strokeColor=none;fontColor=#ffffff;shape=mxgraph.c4.container;align=center;fontSize=12;" value="&lt;b&gt;Agora SDK&lt;/b&gt;&lt;br&gt;[External Service]&lt;br&gt;&lt;br&gt;Live video streaming for mobile apps." vertex="1">
      <mxGeometry height="180" width="260" x="940" y="40" as="geometry" />
    </mxCell>

    <!-- Edges: User to Web Browsers -->
    <mxCell id="edge1" edge="1" parent="1" source="user" target="web_browser" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" />
    <mxCell id="edge1b" edge="1" parent="1" source="user" target="web_browser_customer" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" />

    <!-- Edges: Web Browser Admin to API & WS -->
    <mxCell id="edge4" edge="1" parent="1" source="web_browser" target="api_gateway" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="HTTP/REST" />
    <mxCell id="edge5" edge="1" parent="1" source="web_browser" target="websocket_server" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="WebSocket" />

    <!-- Edges: Web Browser Customer to API & WS -->
    <mxCell id="edge4b" edge="1" parent="1" source="web_browser_customer" target="api_gateway" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="HTTP/REST" />
    <mxCell id="edge5b" edge="1" parent="1" source="web_browser_customer" target="websocket_server" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="WebSocket" />

    <!-- Edges: Mobile Admin to API & WS -->
    <mxCell id="edge6" edge="1" parent="1" source="mobile_admin" target="api_gateway" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="HTTP/REST" />
    <mxCell id="edge7" edge="1" parent="1" source="mobile_admin" target="websocket_server" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="WebSocket" />

    <!-- Edges: Mobile Customer to API & WS -->
    <mxCell id="edge8" edge="1" parent="1" source="mobile_customer" target="api_gateway" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="HTTP/REST" />
    <mxCell id="edge9" edge="1" parent="1" source="mobile_customer" target="websocket_server" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="WebSocket" />

    <!-- Edges: API Gateway to Databases -->
    <mxCell id="edge10" edge="1" parent="1" source="api_gateway" target="database" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="Read/Write" />
    <mxCell id="edge12" edge="1" parent="1" source="api_gateway" target="vector_db" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="Query/Store" />

    <!-- Edges: WebSocket Server to Database -->
    <mxCell id="edge11" edge="1" parent="1" source="websocket_server" target="database" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="Read/Write" />

    <!-- Edges: API Gateway to External Services -->
    <mxCell id="edge13" edge="1" parent="1" source="api_gateway" target="gemini" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="AI Queries" />
    <mxCell id="edge14" edge="1" parent="1" source="api_gateway" target="vnpay" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="Payment Requests" />
    <mxCell id="edge15" edge="1" parent="1" source="api_gateway" target="smtp" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="Send Emails" />

    <!-- Edges: Mobile Apps to Agora SDK -->
    <mxCell id="edge16" edge="1" parent="1" source="mobile_admin" target="agora" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="Video Stream" />
    <mxCell id="edge17" edge="1" parent="1" source="mobile_customer" target="agora" style="endArrow=block;dashed=1;html=1;rounded=0;strokeWidth=2;endFill=1;" value="Video Stream" />

    <!-- Legend -->
    <mxCell id="legend_title" parent="1" style="text;whiteSpace=wrap;html=1;fontSize=12;fontStyle=1;" value="Legend:" vertex="1">
      <mxGeometry height="20" width="100" x="1500" y="60" as="geometry" />
    </mxCell>

    <mxCell id="legend_internal" parent="1" style="html=1;dashed=0;whitespace=wrap;fillColor=#1168bd;strokeColor=none;fontColor=#ffffff;fontSize=10;" value="Internal Container" vertex="1">
      <mxGeometry height="30" width="150" x="1500" y="90" as="geometry" />
    </mxCell>

    <mxCell id="legend_external" parent="1" style="html=1;dashed=0;whitespace=wrap;fillColor=#999999;strokeColor=none;fontColor=#ffffff;fontSize=10;" value="External Service" vertex="1">
      <mxGeometry height="30" width="150" x="1500" y="125" as="geometry" />
    </mxCell>

    <mxCell id="legend_client" parent="1" style="html=1;dashed=0;whitespace=wrap;fillColor=#438dd5;strokeColor=none;fontColor=#ffffff;fontSize=10;" value="Client Application" vertex="1">
      <mxGeometry height="30" width="150" x="1500" y="160" as="geometry" />
    </mxCell>

  </root>
</mxGraphModel>
